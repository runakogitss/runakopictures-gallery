<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kota Lama - @runakopictures' vintage gallery</title>
    <link rel="icon" type="image/png" href="/pics/logo/runakopictures.png">
    <link rel="shortcut icon" type="image/png" href="/pics/logo/runakopictures.png">
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/kotalama.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;900&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <!-- Flickr Justified Gallery CSS -->
    <link href="https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2.1/dist/fjGallery.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container header-row">
            <a href="/" class="logo-link" aria-label="Home">
                <img src="/pics/logo/runakopictures.png" 
                     alt="Runako Pictures Logo" 
                     loading="eager"
                     onerror="this.onerror=null;this.src='/pics/logo/fallback-logo.png'"
                     class="site-logo logo"
                     style="max-width: 100%; height: auto;">
            </a>
            <ul class="nav-menu">
                <li><a href="/" class="nav-link">HOME</a></li>
                <li><a href="/japantravel" class="nav-link">JAPAN TRIP</a></li>
                <li><a href="/kotalama" class="nav-link active" aria-current="page">KOTA LAMA</a></li>
                <li><a href="/schoollife" class="nav-link">SCHOOL LIFE</a></li>
                <li><a href="/studiocology-gallery" class="nav-link">STUDIOCOLOGY</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Gallery Section -->
    <section class="gallery-container">
        <div class="container">
            <div class="gallery-header">
                <div class="vintage-ornament-large"></div>
                <h1 class="gallery-title">Kota Lama</h1>
                <div class="vintage-divider-large"></div>
                <p class="gallery-subtitle">Captivating scenes that preserve the soul of a forgotten era, revealing layers of history, charm, and the enduring spirit of Semarang's colonial heart.</p>
            </div>

            <!-- Photographer's Note Section -->
            <div class="photographers-note">
                <div class="note-container">
                    <div class="note-header">
                        <div class="note-ornament"></div>
                        <h2 class="note-title">Photographer's Note</h2>
                        <div class="note-divider"></div>
                    </div>
                    <div class="note-content">
                        <p class="note-text">Kota Lama Semarang holds a special place in my heart. Walking through these colonial streets feels like stepping back in time, where every building whispers stories of the past and every corner reveals the beautiful blend of Dutch architecture with Indonesian soul.</p>
                        <div class="note-signature">~ Reynard Runako</div>
                    </div>
                </div>
            </div>
            
            <div class="gallery-loading" id="gallery-loading">
                Loading gallery...
            </div>
            
            <div class="fj-gallery" id="kotalama-gallery">
                <!-- Gallery items will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Image Lightbox Modal -->
    <div id="lightbox-modal" class="lightbox-modal">
        <div class="lightbox-overlay"></div>
        <div class="lightbox-content">
            <button class="lightbox-close" id="lightbox-close">&times;</button>
            <button class="lightbox-nav lightbox-prev" id="lightbox-prev">&#8249;</button>
            <button class="lightbox-nav lightbox-next" id="lightbox-next">&#8250;</button>
            <div class="lightbox-image-container">
                <img id="lightbox-image" src="" alt="">
                <div class="lightbox-title" id="lightbox-title"></div>
            </div>
            <div class="lightbox-counter" id="lightbox-counter"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-decorative-elements"></div>
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>Runako Pictures</h3>
                    <p>Fine Art Photography Since 2023</p>
                    <div class="vintage-ornament-small"></div>
                    <div class="social-links">
                        <a href="https://www.instagram.com/runakopictures/" target="_blank" rel="noopener noreferrer" class="instagram-link vintage-style" aria-label="Follow us on Instagram">
                            <svg class="instagram-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2.2c3.2 0 3.6 0 4.9.1 3.3.1 4.8 1.7 4.9 4.9.1 1.3.1 1.6.1 4.8s0 3.6-.1 4.8c-.1 3.3-1.7 4.8-4.9 4.9-1.3.1-1.6.1-4.9.1s-3.6 0-4.8-.1c-3.3-.1-4.8-1.7-4.9-4.9-.1-1.3-.1-1.6-.1-4.8s0-3.6.1-4.8c.1-3.3 1.7-4.8 4.9-4.9 1.2-.1 1.5-.1 4.8-.1zm0-2.2C8.7 0 8.3 0 7 .1 2.6.3.3 2.6.1 7 0 8.3 0 8.7 0 12s0 3.7.1 5c.2 4.4 2.5 6.7 6.9 6.9 1.3.1 1.7.1 5 .1s3.7 0 5-.1c4.4-.2 6.7-2.5 6.9-6.9.1-1.3.1-1.7.1-5s0-3.7-.1-5C21.7 2.6 19.4.3 15 .1 13.7 0 13.3 0 12 0zm0 5.8c-3.4 0-6.2 2.8-6.2 6.2s2.8 6.2 6.2 6.2 6.2-2.8 6.2-6.2-2.8-6.2-6.2-6.2zm0 10.2c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zm6.4-11.8c-.8 0-1.4.6-1.4 1.4s.6 1.4 1.4 1.4 1.4-.6 1.4-1.4-.6-1.4-1.4-1.4z"/>
                            </svg>
                            <span class="social-text">Follow @runakopictures</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="vintage-divider-footer"></div>
                <p>&copy; 2024 Runako Pictures. All rights reserved. Preserving artistic heritage since 2023.</p>
            </div>
        </div>
    </footer>

    <!-- Flickr Justified Gallery JS -->
    <script src="https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2.1/dist/fjGallery.min.js"></script>
    <!-- Advanced Gallery Features -->
    <script src="/image-utils.js"></script>
    <script src="/advanced-gallery.js"></script>
    <script src="/script.js"></script>
    <script src="/vercel-image-fix.js"></script>
    <script>
        // Kota Lama Gallery Data
        const kotalamaGalleryImages = [  
          {
                src: '/pics/kota%20lama/kotlam/01.jpg',
                width: 1200,
                height: 800,
                title: 'Morning Streets',
                description: 'The majestic Dutch colonial buildings that define the character of Kota Lama Semarang.'
            },
            {
                src: '/pics/kota%20lama/kotlam/02.jpg',
                width: 800,
                height: 1200,
                title: 'Hotel Kotta!',
                description: 'Walking through the cobblestone streets where history comes alive in every step.'
            },
            {
                src: '/pics/kota%20lama/kotlam/03.jpg',
                width: 1000,
                height: 800,
                title: 'Heritage Building',
                description: 'Preserved colonial structures that showcase the architectural grandeur of the past.'
            },
            {
                src: '/pics/kota%20lama/kotlam/04.jpg',
                width: 800,
                height: 1000,
                title: 'Old Town Charm',
                description: 'The timeless beauty of Semarang\'s historic district captured in golden light.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05.jpg',
                width: 1200,
                height: 900,
                title: 'Streets of Beauty',
                description: 'Architectural remnants that tell the story of Semarang\'s colonial past.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-2.jpg',
                width: 900,
                height: 1200,
                title: 'Historic Facade',
                description: 'Weathered walls that have witnessed centuries of change and transformation.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-3.jpg',
                width: 1100,
                height: 800,
                title: 'Heritage Corner',
                description: 'Every corner of Kota Lama holds secrets and stories from a bygone era.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-4.jpg',
                width: 800,
                height: 1100,
                title: 'Colonial Details',
                description: 'Intricate architectural details that showcase Dutch craftsmanship in the tropics.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-5.jpg',
                width: 1000,
                height: 800,
                title: 'Old Semarang',
                description: 'The heart of old Semarang where past and present coexist in harmony.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-6.jpg',
                width: 800,
                height: 1000,
                title: 'Historic Quarter',
                description: 'Exploring the historic quarter where every building has a story to tell.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-7.jpg',
                width: 1200,
                height: 800,
                title: 'Colonial Street',
                description: 'Streets lined with colonial buildings that transport you back in time.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-8.jpg',
                width: 900,
                height: 1200,
                title: 'Heritage Preservation',
                description: 'Beautifully preserved buildings that maintain their historical significance.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-9.jpg',
                width: 1100,
                height: 900,
                title: 'Old Town Square',
                description: 'The central square where colonial architecture meets Indonesian culture.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-10.jpg',
                width: 800,
                height: 1200,
                title: 'Historic Landmark',
                description: 'Iconic landmarks that define the skyline of Kota Lama Semarang.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-11.jpg',
                width: 1000,
                height: 800,
                title: 'Colonial Window',
                description: 'Windows that have watched over Semarang for more than a century.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-12.jpg',
                width: 800,
                height: 1000,
                title: 'Heritage Walk',
                description: 'A leisurely walk through the heritage district reveals hidden architectural gems.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-13.jpg',
                width: 1200,
                height: 800,
                title: 'Old Dutch Building',
                description: 'Dutch colonial buildings that stand as monuments to Semarang\'s rich history.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-14.jpg',
                width: 900,
                height: 1200,
                title: 'Historic Alley',
                description: 'Narrow alleys that lead to discoveries of forgotten architectural treasures.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-15.jpg',
                width: 1100,
                height: 800,
                title: 'Colonial Courtyard',
                description: 'Peaceful courtyards where colonial elegance meets tropical serenity.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-16.jpg',
                width: 800,
                height: 1100,
                title: 'Heritage District',
                description: 'The heart of Semarang\'s heritage district with its distinctive colonial character.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-17.jpg',
                width: 1000,
                height: 800,
                title: 'Old Town Vista',
                description: 'Panoramic views of the old town that capture its timeless beauty.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-18.jpg',
                width: 800,
                height: 1000,
                title: 'Colonial Balcony',
                description: 'Ornate balconies that showcase the decorative arts of the colonial period.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-19.jpg',
                width: 1200,
                height: 900,
                title: 'Historic Intersection',
                description: 'Where old streets meet, creating a crossroads of history and culture.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-20.jpg',
                width: 900,
                height: 1200,
                title: 'Heritage Building',
                description: 'Majestic heritage buildings that define the architectural landscape of Kota Lama.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-21.jpg',
                width: 1100,
                height: 800,
                title: 'Colonial Elegance',
                description: 'The refined elegance of Dutch colonial architecture in tropical Indonesia.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-22.jpg',
                width: 800,
                height: 1100,
                title: 'Old Semarang Street',
                description: 'Streets that have remained unchanged, preserving the essence of old Semarang.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-23.jpg',
                width: 1000,
                height: 800,
                title: 'Historic Facade',
                description: 'Building facades that tell stories of merchants, traders, and colonial life.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-24.jpg',
                width: 800,
                height: 1000,
                title: 'Colonial Heritage',
                description: 'Living heritage that continues to inspire and educate future generations.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-25.jpg',
                width: 1200,
                height: 800,
                title: 'Old Town Character',
                description: 'The unique character of Kota Lama that blends Dutch and Indonesian influences.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-26.jpg',
                width: 900,
                height: 1200,
                title: 'Heritage Corner',
                description: 'Every corner reveals new perspectives on Semarang\'s colonial heritage.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-27.jpg',
                width: 1100,
                height: 900,
                title: 'Colonial Architecture',
                description: 'Architectural masterpieces that showcase the grandeur of the colonial era.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-28.jpg',
                width: 800,
                height: 1200,
                title: 'Historic District',
                description: 'The historic district where every building is a piece of living history.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-29.jpg',
                width: 1000,
                height: 800,
                title: 'Old Town Memory',
                description: 'Memories of the past preserved in stone and mortar for future generations.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-30.jpg',
                width: 800,
                height: 1000,
                title: 'Colonial Legacy',
                description: 'The enduring legacy of colonial architecture in modern-day Semarang.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-31.jpg',
                width: 1200,
                height: 800,
                title: 'Heritage Preservation',
                description: 'Efforts to preserve and maintain the architectural heritage of Kota Lama.'
            },
            {
                src: '/pics/kota%20lama/kotlam/05-32.jpg',
                width: 900,
                height: 1200,
                title: 'Timeless Beauty',
                description: 'The timeless beauty of Kota Lama that continues to captivate visitors and locals alike.'
            }
        ];

        // Lightbox functionality
        let currentImageIndex = 0;
        const lightboxModal = document.getElementById('lightbox-modal');
        const lightboxImage = document.getElementById('lightbox-image');
        const lightboxTitle = document.getElementById('lightbox-title');
        const lightboxCounter = document.getElementById('lightbox-counter');
        const lightboxClose = document.getElementById('lightbox-close');
        const lightboxPrev = document.getElementById('lightbox-prev');
        const lightboxNext = document.getElementById('lightbox-next');

        function openLightbox(index) {
            currentImageIndex = index;
            const image = kotalamaGalleryImages[index];
            
            lightboxImage.src = image.src;
            lightboxImage.alt = image.title;
            lightboxTitle.textContent = image.title;
            lightboxCounter.textContent = `${index + 1} / ${kotalamaGalleryImages.length}`;
            
            lightboxModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightboxModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function showPrevImage() {
            currentImageIndex = (currentImageIndex - 1 + kotalamaGalleryImages.length) % kotalamaGalleryImages.length;
            openLightbox(currentImageIndex);
        }

        function showNextImage() {
            currentImageIndex = (currentImageIndex + 1) % kotalamaGalleryImages.length;
            openLightbox(currentImageIndex);
        }

        // ✅ FAST GALLERY INITIALIZATION - Optimized for speed
        document.addEventListener('DOMContentLoaded', function() {
            const galleryContainer = document.getElementById('kotalama-gallery');
            const loadingElement = document.getElementById('gallery-loading');
            const isMobile = window.innerWidth <= 768;
            
            // ✅ INSTANT GALLERY LOADING - No delays
            kotalamaGalleryImages.forEach((image, index) => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'fj-gallery-item';
                galleryItem.style.cursor = 'pointer';
                
                // ✅ OPTIMIZED IMAGE CREATION - Fast loading
                const img = document.createElement('img');
                img.alt = image.title;
                img.width = image.width;
                img.height = image.height;
                img.loading = index < 8 ? 'eager' : 'lazy'; // Load first 8 immediately
                img.decoding = 'async';
                img.src = image.src;
                img.sizes = isMobile ? '100vw' : '(max-width: 1200px) 50vw, 33vw';
                
                // ✅ MINIMAL LOADING HANDLERS - Fast response
                img.addEventListener('load', function() {
                    this.classList.add('loaded');
                    galleryItem.classList.add('loaded');
                });
                
                img.addEventListener('error', function() {
                    this.classList.add('error');
                });
                
                // Create overlay
                const overlay = document.createElement('div');
                overlay.className = 'gallery-item-overlay';
                overlay.innerHTML = `<div class="gallery-item-title">${image.title}</div>`;
                
                // ✅ FAST CLICK HANDLING
                galleryItem.addEventListener('click', () => openLightbox(index));
                
                galleryItem.appendChild(img);
                galleryItem.appendChild(overlay);
                galleryContainer.appendChild(galleryItem);
            });
            
            // ✅ INSTANT SHOW - No loading delays
            if (loadingElement) {
                loadingElement.style.display = 'none';
            }
            galleryContainer.classList.add('loaded');
            
            // ✅ FAST GALLERY INITIALIZATION
            fjGallery(document.querySelectorAll('.fj-gallery'), {
                itemSelector: '.fj-gallery-item',
                gutter: isMobile ? 10 : 15,
                rowHeight: isMobile ? 200 : 280,
                rowHeightTolerance: 0.25,
                maxRowsCount: Number.POSITIVE_INFINITY,
                lastRow: 'left',
                transitionDuration: '0.3s',
                calculateItemsHeight: false,
                resizeDebounce: 100
            });
        });

        // Lightbox event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Close lightbox events
            lightboxClose.addEventListener('click', closeLightbox);
            lightboxModal.addEventListener('click', (e) => {
                if (e.target === lightboxModal || e.target.classList.contains('lightbox-overlay')) {
                    closeLightbox();
                }
            });

            // Navigation events
            lightboxPrev.addEventListener('click', showPrevImage);
            lightboxNext.addEventListener('click', showNextImage);

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (!lightboxModal.classList.contains('active')) return;
                
                switch(e.key) {
                    case 'Escape':
                        closeLightbox();
                        break;
                    case 'ArrowLeft':
                        showPrevImage();
                        break;
                    case 'ArrowRight':
                        showNextImage();
                        break;
                }
            });

            // Touch/swipe support for mobile
            let touchStartX = 0;
            let touchEndX = 0;

            lightboxModal.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            });

            lightboxModal.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });

            function handleSwipe() {
                const swipeThreshold = 50;
                const diff = touchStartX - touchEndX;
                
                if (Math.abs(diff) > swipeThreshold) {
                    if (diff > 0) {
                        showNextImage(); // Swipe left = next image
                    } else {
                        showPrevImage(); // Swipe right = previous image
                    }
                }
            }
        });
    </script>
</body>
</html>
